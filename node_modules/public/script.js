const form = document.getElementById('form-criar-item');
const listaItens = document.getElementById('lista-itens');

const API_URL = 'http://localhost:3000/itens';
async function carregarItens() {
    try{
        const response = await fetch(API_URL);
        const itens = await response.json();

        listaItens.innerHTML = itens.map(item =>
            `<li>ID: ${item.id} | Nome: ${item.nome}<li>`
        ).join('');
    } catch (erro) {
        console.log("Erro ao carregar itens: ", erro);
        }
        
    }


    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const novoItem = {
            id: parseInt(document.getElementById('id').value),
            nome: document.getElementById('nome').value
        };

        try{
            await fetch(API_URL, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(novoItem)
            });

            form.reset();
            carregarItens();
        } catch (erro){
            console.log("Erro ao criar item:" ,erro);
        }        
    });

    carregarItens();
    
